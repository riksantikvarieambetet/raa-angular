<div>
  <raa-bottom-dialog
    [isVisible]="showBottomDialog"
    cancelBtnText="Inställningar"
    confirmBtnText="Godkänn alla"
    confirmBtnColor="green"
    (onYesAction)="acceptAllCookies()"
    (onNoAction)="openSettings()"
    hideOverlay="true"
    background="tw-bg-raa-white"
  >
    <div class="tw-flex tw-flex-col md:tw-flex-row tw-items-center tw-justify-between tw-w-full tw-p-6">
      <div class="tw-flex tw-w-full tw-flex-col tw-mb-8 md:tw-mb-0">
        <p class="tw-pb-2 tw-w-full">Vi använder kakor(cookies) för en bättre användarupplevelse</p>
        <p class="tw-pb-2 tw-w-full">
          Några kakor är nödvändiga för att webbplatsen ska fungera optimalt och andra används till statistik. Genom att
          klicka &quot;Godkänn alla&quot; godkänner du användandet av alla kakor.
        </p>
        <div>
          <a
            class="raa-link"
            target="_blank"
            href="https://raa.se/om-webbplatsen/dessa-filer-sparar-vi-pa-din-dator/"
            rel="noreferrer"
          >
            <span class="raa-icon raa-icon-externallink tw-mr-1"></span>
            Läs mer om kakor här.
          </a>
        </div>
      </div>
    </div>
  </raa-bottom-dialog>
  <div class="tw-max-h-[90vh]">
    <raa-dialog *ngIf="showDialog" header="Inställningar för kakor (Cookies)" width="40" [close]="onCloseDialog">
      <div class="tw-py-4 tw-px-4 tw-overflow-auto">
        <p class="tw-mb-4">
          Nödvändiga kakor används för att webbplatsen ska fungera optimalt för dig som användare. Kakor för statistik
          används som underlag för förbättringsarbeten. Kakor för statistik är valfritt och kan inaktiveras.
        </p>

        <div *ngFor="let cookie of defaultCookies" class="tw-p-[5px]">
          <div *ngIf="cookie.visible">
            <hr class="tw-w-full tw-border-raa-gray-3" />
            <div class="tw-flex tw-pt-2 tw-w-full tw-relative tw-justify-between tw-items-center">
              <mat-accordion>
                <mat-expansion-panel
                  (click)="updateExpanded(cookie)"
                  class="mat-elevation-z0 tw-text-raa-orange raa-button-focus tw-flex"
                  hideToggle
                >
                  <mat-expansion-panel-header class="tw-flex tw-relative">
                    <span
                      class="tw-text-size-1.75 tw-text-raa-orange raa-icon-arrow-right tw-absolute tw-transform"
                      [ngClass]="{ 'tw-rotate-90': cookie.expanded }"
                      aria-hidden="true"
                    ></span>
                    <mat-panel-title class="tw-max-w-[40%] md:tw-max-w-full tw-break-all">{{
                      cookie.title
                    }}</mat-panel-title>
                  </mat-expansion-panel-header>
                  <p>{{ cookie.description }}</p>
                </mat-expansion-panel>
              </mat-accordion>
              <div class="tw-flex tw-items-center tw-justify-end tw-absolute tw-right-0 tw-top-0 tw-mt-5">
                <p *ngIf="cookie.title === 'Nödvändiga'" class="tw-pr-4 tw-mb-0">Alltid aktiverad</p>
                <p *ngIf="cookie.title !== 'Nödvändiga'" class="tw-pr-4 tw-mb-0">
                  {{ cookie.status ? 'Aktiverad' : 'Inaktiverad' }}
                </p>

                <div *ngIf="cookie.title !== 'Nödvändiga'">
                  <mat-slide-toggle
                    (change)="updateCookieStatus(cookie)"
                    [disabled]="cookie.disabled"
                    [checked]="cookie.status"
                  ></mat-slide-toggle>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tw-flex tw-flex-col md:tw-flex-row tw-gap-4 tw-justify-end tw-pt-4">
          <button (click)="onDenyClick()" class="raa-button raa-button-cancel">avvisa alla</button>
          <button (click)="onAcceptClick()" class="raa-button raa-button-confirm">spara inställningar</button>
        </div>
      </div>
    </raa-dialog>
  </div>
</div>
